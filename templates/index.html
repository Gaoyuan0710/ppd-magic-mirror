{% extends 'layout.html' %} {% block style %}
<style>
#main {
	max-width: 1200px;
	margin: 0 auto;
}
#scatter {
	position: relative;
	width: 100%;
	height: 527px;
	background-color: #222;
	margin-bottom: 30px;
}

#modes {
	position: absolute;
	left: 22px;
	top: 49px;
	border: 1px solid #f5f5f5;
	border-radius: 3px;
	font-size: 12px;
}
#modes div {
	display: inline-block;
	color: #f5f5f5;
	padding: 6px 12px;
	font-size: 12px;
	transition: color, background-color .3s;
    -o-transition: color, background-color .3s;
    -ms-transition: color, background-color .3s;
    -moz-transition: color, background-color .3s;
    -webkit-transition: color, background-color .3s;
}

#modes div.active, #modes div:hover {
	color: #333;
	background-color: #f5f5f5;
}

#modes div:hover {
	cursor: pointer;
}

#ranks {
	position: absolute;
	top: 47px;
	right: 20px;
	height: 340px;
	overflow-y: scroll;
	border: 1px solid rgba(200,200,200,0.6);
	border-radius: 3px;
	font-size: 13px;
}
#ranks div {
	color: #eee;
	padding: 8px 24px;
	text-align: center;
	transition: color, background-color .3s;
    -o-transition: color, background-color .3s;
    -ms-transition: color, background-color .3s;
    -moz-transition: color, background-color .3s;
    -webkit-transition: color, background-color .3s;
}
#ranks div.active, #ranks div:hover {
	color: #333;
	background-color: #f5f5f5;
}

#ranks div:hover {
	cursor: pointer;
}

#news {
	width: 100%;
	height: 327px;
	background-color: #222; 
	margin-bottom: 30px;
}

#comments {
	width: 100%;
	height: 327px;
	background-color: #222;
}
</style>
{% endblock %}

{% block body %}
<div id="scatter">
	<div class="plot-title">知识图谱和关键词云舆情可视化</div>
	<div id="modes">
		<div class="active">知识图谱</div>
		<div>关键词云</div>
	</div>
	<div id="ranks">
		{% for t in platforms %}
		<div>{{t.platName}}</div>
		{% endfor %}
	</div>
	<svg></svg>
</div>

<div id="news">
	<div class="plot-title">媒体新闻情感分析</div>
</div>

<div id="comments">
	<div class="plot-title">大众评论情感分析</div>
</div>

<script>
$(document).ready(function() {
	$('#nav1').addClass('active');

	$('#modes div').click(function(event) {
		$('#modes div').removeClass('active');
		$(this).addClass('active');
	});

	$('#ranks div:first-child').addClass('active');

	$('#ranks div').click(function(event) {
		$('#ranks div').removeClass('active');
		$(this).addClass('active');
		var platName = $(this).text();

		var diff =  $(this).offset().top - $('#ranks').offset().top;
        if (diff >= 101) {
            $('#ranks').animate({
                scrollTop: $('#ranks').scrollTop() + diff - 34
            }, 300);
        }

        $.ajax({
        	url: '{{url_for("knowledge")}}',
        	type: 'POST',
        	dataType: 'json',
        	data: {
        		name: platName
        	},
        })
        .done(function(data) {

        })
        .fail(function() {
        	console.log("error");
        })
        .always(function() {
        	console.log("complete");
        }); 
	});

	var mode = true;
	function draw(name){

	}
});	
</script>
{% endblock %}